# **Лекция №33: Репликация**
> _Разработка проекта_

## **Задание:**
Домашнее задание
Спрогнозировать рост данных и спроектировать модель хранения и архивации

Цель:
Научиться прогнозировать рост данных и возможные проблемы.

Описание/Пошаговая инструкция выполнения домашнего задания:
Формируем документ в котором описываем

прогноз по возможному росту базы

рост данных

рост количества пользователей

всплески одновременных соединений

описываем возможные угрозы и методы защиты от них

предлагаем стратегии бэкапа

репликации

кластеризации


Критерии оценки:
Выполнение ДЗ: 10 баллов
плюс 2 балла за красивое решение
минус 2 балла за рабочее решение, и недостатки указанные преподавателем не устранены

---

## **Выполнено:**

## Прогноз роста данных и проектирование модели хранения и архивации

### 1. Прогноз роста базы данных

Прогнозировать рост базы данных необхдимо с учетом данных бизнеса.
У бизнеса обычно существуют тактические, стратегические планы развития, включающие прогнозы 
роста количества пользователей, заказов, и других целевых KPI. 

#### 1.1 Возьмем для примера БД интернет-магазина со слудующми показателями текущего состояния:

Объем данных: 100 ГБ.
Темп роста: 5 ГБ в месяц.
Тип данных: транзакционные данные, логи, мультимедийные файлы.

#### 1.2 Прогноз роста:

Краткосрочный (1 год):
Прирост данных составит около 60 ГБ.
Общий объем: 160 ГБ.

Среднесрочный (3 года):
Увеличение объема данных до 360 ГБ при сохранении текущего темпа.

Долгосрочный (5 лет):
Возможно увеличение до 600 ГБ при росте бизнеса и числа пользователей.

### 2. Рост данных

Структурированные данные: транзакции (примерно 60% от общего объема).
Неструктурированные данные: логи, изображения, видео (примерно 40%).
Тенденции: увеличение доли мультимедийных данных на 10-15% ежегодно.

### 3. Рост количества пользователей

#### 3.1 Ожидаемый прирост:

Текущая база пользователей: 10,000 активных пользователей.
Темп роста: 20% в год.
Прогноз:
- Через 1 год: 12,000 пользователей.
- Через 3 года: 17,280 пользователей.
- Через 5 лет: 24,883 пользователей.

#### 3.2 Всплески активности:

Пиковые часы:
- 9:00–11:00 (работа с платформой).
- 18:00–21:00 (доступ с мобильных устройств).

Сезонные всплески:
- Чёрная пятница, новогодние праздники.

### 4. Всплески одновременных соединений

Текущая максимальная нагрузка: 500 одновременных соединений.

Прогноз:
- Через 1 год: до 600 соединений.
- Через 3 года: до 850 соединений.
- Через 5 лет: до 1200 соединений.

Периоды всплесков:
- Маркетинговые акции.
- Выход новых функций.

Желательно использовать пул соединений к БД. Для анализа и устранения причин всплесков - систему мониторинга.

### 5. Возможные угрозы и методы защиты

#### 5.1 Угрозы:

- Перегрузка системы: увеличение задержек, снижение производительности.
- Потеря данных: из-за отказов оборудования или кибератак.
- Неправомерный доступ: утечка конфиденциальных данных.

#### 5.2 Методы защиты:

Масштабирование инфраструктуры:
- Вертикальное (увеличение мощности серверов).
- Горизонтальное (добавление серверов).

Резервное копирование: регулярные бэкапы.

Мониторинг: внедрение систем обнаружения аномалий (IDS/IPS).

Шифрование: данных на диске и в процессе передачи.

Доступ: многофакторная аутентификация.

### 6. Стратегии бэкапа

Типы бэкапов:
- Полный – 1 раз в неделю.
- Дифференциальный – ежедневно.
- Инкрементальный – каждые 6 часов.

Хранение:

- Локально (NAS/SAN).
- В облаке (Yandex Cloud, VK Cloud,...).

Частота тестирования восстановления: ежемесячно.

### 7. Стратегии репликации

Репликация в реальном времени:
- Для критичных данных (например, транзакции).

Асинхронная репликация:
- Для второстепенных данных (логи).

Географическое распределение:

Для обеспечения доступности в разных регионах.

### 8. Стратегии кластеризации

Типы кластеров:

- Active-Active: распределение нагрузки между узлами.
- Active-Passive: резервные узлы активируются при сбое.

Программные решения:

- Kubernetes для управления контейнерами.
- PostgreSQL Cluster для баз данных.

Балансировка нагрузки:

- Использование NGINX или HAProxy.

### Заключение

Внедрение предложенных стратегий позволит справляться с растущими объёмами данных, поддерживать высокую доступность системы, минимизировать риски потерь и обеспечивать стабильную производительность в условиях роста пользователей и нагрузки.

